{% extends 'base.html' %}

{% block title %}FAQ - StudyBox{% endblock %}

{% block content %}
<div class="container py-4">
	<h1 class="mb-4 text-center text-white">Frequently Asked Questions</h1>

	{% if tickets and tickets|length > 0 %}
	<div class="accordion" id="faqList">
		{% for t in tickets %}
		<div class="accordion-item">
			<h2 class="accordion-header" id="faq-heading-{{ t.id }}">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-{{ t.id }}" aria-expanded="false" aria-controls="faq-collapse-{{ t.id }}">
					{{ t.subject }}
				</button>
			</h2>
			<div id="faq-collapse-{{ t.id }}" class="accordion-collapse collapse" aria-labelledby="faq-heading-{{ t.id }}" data-bs-parent="#faqList">
				<div class="accordion-body">
					<div class="mb-2">{{ t.message }}</div>
					{% if t.image_url %}
					<div class="mb-3">
						<a href="{{ t.image_url }}" target="_blank">
							<img src="{{ t.image_url }}" alt="attachment" class="img-fluid rounded" style="max-height: 260px;">
						</a>
					</div>
					{% endif %}
					{% if t.replies and t.replies|length > 0 %}
					<div class="p-3 rounded" style="background:#f8f9fa;">
						<div class="mb-2 fw-semibold">Answer</div>
						<div>{{ t.replies[0].message }}</div>
					</div>
					{% endif %}
				</div>
			</div>
		</div>
		{% endfor %}
	</div>
	{% else %}
	<div class="card">
		<div class="card-body text-center text-muted">No FAQ items yet.</div>
	</div>
	{% endif %}
</div>
{% endblock %}


