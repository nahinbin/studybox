{% extends 'base.html' %}
{% block title %}@{{ user.username }} - Profile{% endblock %}
{% block extra_css %}
<link rel="icon" type="image/png" href="{{ add_cache_bust(url_for('dynamic_favicon', code=user.public_id[2:])) }}">
{% endblock %}
{% block content %}
<div class="container py-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-sm">
                <div class="card-body">
                    <div class="d-flex align-items-center justify-content-between">
                        <div class="d-flex align-items-center gap-3">
                            <img src="{{ add_cache_bust(user_avatar_url(user, 64)) }}" alt="Avatar" class="rounded-circle" width="64" height="64">
                            <h3 class="mb-0">@{{ user.username }}</h3>
                        </div>
                        <div class="d-flex align-items-center gap-2">
                            {% if user.is_admin %}
                                <img src="{{ url_for('static', filename='images/admin_verified.png') }}?v={{ cache_bust_version() }}" alt="Admin" title="Admin Account" style="height:20px; width:auto;">
                            {% endif %}
                            {% if user.is_verified %}
                                <img src="{{ url_for('static', filename='images/verified.png') }}?v={{ cache_bust_version() }}" alt="Verified" title="Verified Account" style="height:20px; width:auto;">
                            {% else %}
                                <span class="badge bg-secondary">Unverified</span>
                            {% endif %}
                            {% if user.is_verified and (user.email and user.email.endswith('@student.mmu.edu.my')) %}
                                <img src="{{ url_for('static', filename='images/mmu_fav.png') }}?v={{ cache_bust_version() }}" alt="MMU" title="Multimedia University Malaysia" style="height:20px; width:auto;">
                            {% endif %}
                        </div>
                    </div>
                    <hr>
                    <dl class="row mb-0">
                        <dt class="col-sm-4">User ID</dt>
                        <dd class="col-sm-8">
                            <a href="{{ url_for('public_profile_by_public_code', code=user.public_id[2:]) }}">{{ user.public_id }}</a>
                        </dd>

                        <dt class="col-sm-4">Institution</dt>
                        <dd class="col-sm-8">{{ user.school_university or 'â€”' }}</dd>

                        {% if user.bio %}
                        <dt class="col-sm-4">Bio</dt>
                        <dd class="col-sm-8">{{ user.bio }}</dd>
                        {% endif %}
                    </dl>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

