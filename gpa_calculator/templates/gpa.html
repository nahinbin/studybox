{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('gpa.static', filename='gpa.css') }}">
<title>GPA Calculator</title>
{% endblock %}

{% block content %}
<h1>Welcome To The GPA Calculator</h1>

<div>
    {% for subject in subjects %}
    <div class="subject-card">
        <strong>{{ subject.subject_name() }}</strong><br>
        <form method="POST">
            <input type="hidden" name="subject_id" value="{{ subject.id }}">
            <label for="gpa_{{ subject.id }}">GPA:</label>
            <input id="gpa_{{ subject.id }}" type="number" name="subject_gpa" step="0.01" max="4.0" min="0" value="{{ subject.gpa }}" required>
            <button type="submit">Save</button>
        </form>
        Credits: {{ subject.credit_hours() }}<br>

        <!-- <form action="{{ url_for('gpa.edit_subject', subject_id=subject.id) }}" method="GET" style="display:inline;">
            <button type="submit">Edit</button>
        </form> -->

        <!-- <form action="{{ url_for('gpa.delete_subject', subject_id=subject.id) }}" method="POST" style="display:inline;">
            <button type="submit">Delete</button>
        </form> -->
    </div>
    {% endfor %}
</div>

<!-- Removed add-subject form; GPA per enrolled subject can be updated above -->

{% set color = 'red' %}
{% if gpa > 3 %}
    {% set color = 'green' %}
{% elif gpa > 2 %}
    {% set color = 'orange' %}
{% endif %}
<h2>
    Your GPA is: <span style="color: {{ color }};">{{ gpa }}</span>
</h2>
<h2>Cumulative GPA (CGPA): {{ cgpa }}</h2>

{% endblock %}
